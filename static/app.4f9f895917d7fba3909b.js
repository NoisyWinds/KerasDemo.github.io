webpackJsonp([1],{NHnr:function(t,e,a){"use strict";function n(t){a("we4B")}function s(t){for(var e=t.data,a=t.width,n=t.height,s=a,i=n,r=-1,o=-1,c=0;c<a;c++)for(var u=0;u<n;u++){var d=c+u*a;e[4*d+3]>0&&(c<s&&(s=c),c>r&&(r=c),u<i&&(i=u),u>o&&(o=u))}s-=20,r+=20,i-=20,o+=20;var p=r-s+1,h=o-i+1;if(p<h){var l=Math.floor((h-p)/2);r+=h-p-l,s-=l}else if(p>h){var v=Math.floor((p-h)/2),f=p-h-v;o+=f,i-=v}p=r-s+1,h=o-i+1;for(var m=new Uint8ClampedArray(p*h*4),w=s;w<=r;w++)for(var g=i;g<=o;g++)if(w>=0&&w<a&&g>=0&&g<n){var C=w+g*a,y=w-s+(g-i)*p;m[4*y+3]=e[4*C+3]}return new ImageData(m,p,h)}function i(t){a("siqp")}Object.defineProperty(e,"__esModule",{value:!0});var r=a("5vqR"),o={name:"app"},c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},u=[],d={render:c,staticRenderFns:u},p=d,h=a("/Xao"),l=n,v=h(o,p,!1,l,null,null),f=v.exports,m=a("zO6J"),w={name:"keras-js",data:function(){return{start:!1,input:new Float32Array(784),output:new Float32Array(10),outputClasses:[0,1,2,3,4,5,6,7,8,9]}},mounted:function(){var t=document.getElementById("input-canvas");this.ctx=t.getContext("2d"),this.ctx.lineWidth=20,this.ctx.lineCap="round",this.ctx.strokeStyle="#000000"},computed:{predictedClass:function(){var t=this;return 0===this.output.reduce(function(t,e){return t+e},0)?-1:(console.log(this.output.reduce(function(e,a,n){return a>t.output[e]?n:e},0)),this.output.reduce(function(e,a,n){return a>t.output[e]?n:e},0))}},methods:{draw:function(t){this.start&&(this.ctx.beginPath(),this.ctx.moveTo(this.start[0],this.start[1]),this.ctx.lineTo(t.offsetX,t.offsetY),this.ctx.stroke(),this.start=[t.offsetX,t.offsetY])},startDraw:function(t){this.start=[t.offsetX,t.offsetY]},finishDraw:function(t){var e=this;this.start=!1;var a=document.getElementById("input-canvas").getContext("2d"),n=s(a.getImageData(0,0,a.canvas.width,a.canvas.height)),i=document.getElementById("input-canvas-centercrop").getContext("2d");i.canvas.width=n.width,i.canvas.height=n.height,i.putImageData(n,0,0);var r=document.getElementById("input-canvas-scaled").getContext("2d");r.save(),r.scale(28/i.canvas.width,28/i.canvas.height),r.clearRect(0,0,i.canvas.width,i.canvas.height),r.drawImage(document.getElementById("input-canvas-centercrop"),0,0);var o=r.getImageData(0,0,r.canvas.width,r.canvas.height).data;r.restore(),this.input=new Float32Array(784);for(var c=0,u=o.length;c<u;c+=4)this.input[c/4]=o[c+3]/255;window.model.predict({input:this.input}).then(function(t){e.output=t.output})}}},g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("canvas",{staticStyle:{display:"none"},attrs:{id:"input-canvas-scaled",width:"28",height:"28"}}),t._v(" "),a("canvas",{staticStyle:{display:"none"},attrs:{id:"input-canvas-centercrop"}}),t._v(" "),a("canvas",{staticClass:"canvas",attrs:{width:"240",height:"240",id:"input-canvas"},on:{mousemove:t.draw,mouseup:t.finishDraw,mousedown:t.startDraw}}),t._v(" "),a("div",{staticClass:"output"},t._l(t.outputClasses,function(e){return a("div",{staticClass:"output-class",class:{predicted:e===t.predictedClass}},[a("div",{staticClass:"output-label"},[t._v(t._s(e))]),t._v(" "),a("transition",{attrs:{name:"grow"}},[e===t.predictedClass?a("div",{staticClass:"isNumber_line"}):t._e()])],1)}))])},C=[],y={render:g,staticRenderFns:C},_=y,x=a("/Xao"),I=i,D=x(w,_,!1,I,"data-v-674f897c",null),B=D.exports;r.a.use(m.a);var E=new m.a({routes:[{path:"/",name:"HelloWorld",component:B}]});r.a.config.productionTip=!1,new r.a({el:"#app",router:E,template:"<App/>",components:{App:f}})},siqp:function(t,e){},we4B:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.4f9f895917d7fba3909b.js.map